<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <script>

      $(document).ready(function(){
        var userTweets = function(userName){
          $('body').html('');
          var user = 'streams.users.' + userName
	      $.each(streams.home, function(index, tweet){
	        if(tweet.user == userName){
		    $('<div id="tweet.user"></div>').text(
		      '@' + tweet.user + ': ' + tweet.message + ' ' + tweet.created_at
            ).appendTo('body').click(function(){
              updateTweets();
            });
            }      
	      });    
        };
        var updateTweets = function(){
          $('body').html('');
          $.each(streams.home, function(index, tweet){
            $('<div id="tweet.user"></div>').text(
              '@' + tweet.user + ': ' + tweet.message + ' ' + tweet.created_at
            ).appendTo('body').click(function(){
              userTweets(tweet.user);
            });
          });
          $('<button/>', {
            text: 'Update',
            id: 'button',
            click: updateTweets
          }).appendTo('body');
        };
        updateTweets();
      });

    </script>
  </body>
</html>

